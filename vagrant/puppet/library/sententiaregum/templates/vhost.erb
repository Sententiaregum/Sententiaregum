# Custom vhost for puppet
<VirtualHost *:80>
    ServerName <%= @server_name_value %>
    DocumentRoot <%= @real_docroot %>
<% if @serveraliases.is_a? Array -%>
    ServerAlias <%= @serveraliases.flatten.join(" ") %>
<% else -%>
    ServerAlias <%= @serveraliases %>
<% end -%>

    ErrorLog  <%= scope.lookupvar('apache::log_dir') %>/<%= @name %>-error_log
    CustomLog <%= scope.lookupvar('apache::log_dir') %>/<%= @name %>-access_log common
    <Directory <%= @real_docroot %>>
        AllowOverride <%= @directory_allow_override %>

        DirectoryIndex <%= scope.lookupvar('sententiaregum::backend::server::front_controller') %>

        RewriteEngine on
        RewriteCond %{REQUEST_FILENAME} !-f
        RewriteRule ^(.*)$ <%= scope.lookupvar('sententiaregum::backend::server::front_controller') %> [QSA,L]
    </Directory>
</VirtualHost>
